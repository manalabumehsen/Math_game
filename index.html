<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¶Ø±Ø¨ - Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³Ø© Ù…Ù†Ø§Ù„ Ø£Ø¨Ùˆ Ù…Ø­Ø³Ù†</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin:0; padding:0;
  overflow-x:hidden;
  background-image: url('https://cdn.pixabay.com/photo/2017/03/28/12/09/education-2187477_1280.png'); /* Ø®Ù„ÙÙŠØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© */
  background-size: cover;
  background-position: center;
}
h1 { color:#ff5722; margin-top:20px; font-size:32px; }
h2 { color:#555; margin-top:5px; font-size:22px; }
input { padding:10px; font-size:18px; margin:5px; border-radius:8px; border:1px solid #ccc; width:250px; }
button {
  padding:10px 20px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:#4caf50;
  color:white;
  cursor:pointer;
  margin:5px;
}
#game { margin-top:20px; position:relative; min-height:400px; }
#score { font-size:20px; margin:10px; }
.feedback { font-size:18px; margin:10px; }
#cup { font-size:80px; display:none; margin-top:20px; }
.balloon {
  position:absolute;
  font-size:40px;
  animation:floatUp 4s linear forwards;
}
@keyframes floatUp {
  0% { transform: translateY(0) scale(1); opacity:1; }
  100% { transform: translateY(-400px) scale(1.2); opacity:0; }
}
</style>
</head>
<body>

<h1>ğŸˆ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¶Ø±Ø¨ Ù„Ù„Ø£Ø·ÙØ§Ù„</h1>
<h2>ØªØµÙ…ÙŠÙ…: Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³Ø© Ù…Ù†Ø§Ù„ Ø£Ø¨Ùˆ Ù…Ø­Ø³Ù†</h2>

<div id="nameScreen">
  <p>Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¨Ø¯Ø¡:</p>
  <input type="text" id="playerName" placeholder="Ù…Ø«Ø§Ù„: Ù…Ù†Ø§Ù„">
  <br>
  <button onclick="saveName()">Ø§Ø¨Ø¯Ø£</button>
</div>

<div id="tableScreen" style="display:none;">
  <p>Ø§Ø®ØªØ± Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¶Ø±Ø¨:</p>
  <div id="tableButtons"></div>
</div>

<div id="game" style="display:none;"></div>

<div id="score">â­ Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
<div id="cup">ğŸ†</div>

<audio id="correct" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="wrong" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>
<audio id="confetti" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
let playerName = '';
let currentTable = 1;
let score = 0;
let cardIndex = 0;
let cards = [];
let tableQueue = [1,2,3,4,5,6,7,8,9,10]; 
let correctSound = document.getElementById('correct');
let wrongSound = document.getElementById('wrong');
let confettiSound = document.getElementById('confetti');

function saveName(){
  const name = document.getElementById('playerName').value.trim();
  if(name===''){ alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ùƒ!"); return; }
  playerName = name;
  document.getElementById('nameScreen').style.display='none';
  showTableSelect();
}

function showTableSelect(){
  const div = document.getElementById('tableButtons');
  div.innerHTML='';
  tableQueue.forEach(t=>{
    const btn = document.createElement('button');
    btn.innerText='Ø¬Ø¯ÙˆÙ„ '+t;
    btn.onclick=()=>startGame(t);
    div.appendChild(btn);
  });
  document.getElementById('tableScreen').style.display='block';
}

function startGame(n){
  currentTable = n;
  score = 0;
  cardIndex = 0;
  cards = [];
  generateCards();
  document.getElementById('tableScreen').style.display='none';
  document.getElementById('game').style.display='block';
  document.getElementById('score').innerText="â­ Ø§Ù„Ù†Ù‚Ø§Ø·: "+score;
  showCard();
}

function generateCards(){
  for(let i=1;i<=10;i++){
    const question = `${i} Ã— ${currentTable}`;
    const correctSum = Array(i).fill(currentTable).join(' + ');
    const correctAnswer = i*currentTable;
    cards.push({question: question, sum: correctSum, answer: correctAnswer});
  }
}

function showCard(){
  const container = document.getElementById('game');
  container.innerHTML='';
  if(cardIndex >= cards.length){
    tableQueue = tableQueue.filter(t=>t!==currentTable); 
    if(tableQueue.length===0){
      document.getElementById('cup').style.display='block';
      container.innerHTML="<h2>ğŸ‰ Ø£Ø­Ø³Ù†Øª ÙŠØ§ "+playerName+"! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª ÙƒÙ„ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„!</h2>";
    } else {
      alert("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ø¯ÙˆÙ„ "+currentTable+"! Ø§Ø®ØªØ± Ø¬Ø¯ÙˆÙ„Ù‹Ø§ Ø¢Ø®Ø±.");
      showTableSelect();
    }
    return;
  }
  const card = cards[cardIndex];
  container.innerHTML=`
    <div class="card">
      <h3>${card.question}</h3>
      <p>Ø§ÙƒØªØ¨ Ø¬Ù…Ù„Ø© Ø§Ù„Ø¬Ù…Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±ÙŠ:</p>
      <input type="text" id="sumInput" placeholder="Ù…Ø«Ø§Ù„: 2 + 2 + 2">
      <p>Ø§ÙƒØªØ¨ Ø§Ù„Ù†Ø§ØªØ¬:</p>
      <input type="number" id="ansInput" placeholder="Ù…Ø«Ø§Ù„: 6">
      <br>
      <button onclick="checkCard()">ØªØ­Ù‚Ù‚</button>
      <div class="feedback" id="feedback"></div>
    </div>
  `;
}

function createBalloons(){
  for(let i=0;i<10;i++){
    const b = document.createElement('div');
    b.className='balloon';
    b.innerText='ğŸˆ';
    b.style.left=Math.random()*90+'%';
    b.style.fontSize=(20+Math.random()*30)+'px';
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),4000);
  }
}

function checkCard(){
  const card = cards[cardIndex];
  const sumInput = document.getElementById('sumInput').value.replace(/\s+/g,'');
  const ansInput = Number(document.getElementById('ansInput').value);
  const feedback = document.getElementById('feedback');

  if(sumInput === card.sum.replace(/\s+/g,'') && ansInput === card.answer){
    feedback.style.color='green';
    feedback.innerText="âœ… Ø£Ø­Ø³Ù†Øª ÙŠØ§ "+playerName+"!";
    correctSound.play();
    confettiSound.play();
    createBalloons();
    score += 10;
    document.getElementById('score').innerText="â­ Ø§Ù„Ù†Ù‚Ø§Ø·: "+score;
    cardIndex++;
    setTimeout(showCard,1000);
  } else {
    feedback.style.color='red';
    feedback.innerText="âš ï¸ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙŠØ§ "+playerName+"!";
    wrongSound.play();
  }
}
</script>

</body>
</html>
